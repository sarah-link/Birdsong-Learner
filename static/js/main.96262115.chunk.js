(this["webpackJsonpbirdsong-learner"]=this["webpackJsonpbirdsong-learner"]||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var i=n(0),s=n.n(i),r=n(14),a=n.n(r),o=(n(21),n(3)),c=n(4),l=n(6),d=n(5),u=(n(22),n(7)),b=(n(23),n(1)),h=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={bird:i.props.bird},i}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state.bird.sono.full.replace("//www.xeno-canto.org/","");return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{id:"sonogram",children:[Object(b.jsx)("img",{src:e,id:"sonogramImg",alt:"Sonogram of bird song"}),Object(b.jsxs)("p",{className:"credits",children:["Recorded by: ",this.state.bird.rec]})]})})}}]),n}(s.a.Component),j=(n(25),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).audioEnded=function(){console.log("here"),i.setState({isPlaying:!1})},i.state={bird:i.props.bird,isPlaying:!1},i}return Object(c.a)(n,[{key:"playPauseAudio",value:function(){var e=document.getElementById("songAudio");console.log(e.paused),console.log(e.currentTime),e.paused?(this.setState({isPlaying:!0}),e.play()):(this.setState({isPlaying:!1}),e.pause())}},{key:"componentDidMount",value:function(){document.getElementById("songAudio").addEventListener("ended",this.audioEnded)}},{key:"render",value:function(){var e=this,t=this.state.bird.file.replace("//www.xeno-canto.org/","");return Object(b.jsxs)("div",{id:"idenInfo",children:[Object(b.jsx)(h,{bird:this.state.bird}),Object(b.jsxs)("audio",{id:"songAudio",children:[Object(b.jsx)("source",{src:t,type:"audio/mpeg"}),"Your browser does not support the audio element."]}),Object(b.jsx)("div",{id:"audioControls",children:Object(b.jsx)("button",{id:"playPauseButton",onClick:function(){return e.playPauseAudio()},children:this.state.isPlaying?Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"bi bi-pause-fill pause",viewBox:"0 0 16 16",children:Object(b.jsx)("path",{d:"M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"})}):Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"bi bi-play-fill play",viewBox:"0 0 16 16",children:Object(b.jsx)("path",{d:"M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"})})})})]})}}]),n}(s.a.Component)),g=(n(26),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={bird:i.props.bird,userGuess:"",isGuessCorrect:null},i.handleChange=i.handleChange.bind(Object(u.a)(i)),i.handleSubmit=i.handleSubmit.bind(Object(u.a)(i)),i}return Object(c.a)(n,[{key:"handleChange",value:function(e){this.setState({userGuess:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.cleanString(this.state.userGuess),n=this.cleanString(this.state.bird.en);this.setState({isGuessCorrect:t===n})}},{key:"cleanString",value:function(e){return String(e).toLowerCase().trim().replaceAll("'","").replaceAll("-","").replaceAll(" ","")}},{key:"showCheat",value:function(){this.setState({userGuess:this.state.bird.en})}},{key:"render",value:function(){var e,t=this;return e=!1===this.state.isGuessCorrect?Object(b.jsx)("p",{id:"feedback",className:"incorrect",children:"Your guess is incorrect, try again"}):!0===this.state.isGuessCorrect?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{id:"feedback",className:"correct",children:"Correct!"}),Object(b.jsx)("button",{onClick:this.props.loadNextBird,id:"nextBirdButton",children:"Try Again?"})]}):Object(b.jsx)("p",{children:"\xa0"}),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{id:"userGuess",children:[Object(b.jsx)("button",{id:"cheatButton",onClick:function(){return t.showCheat()},children:"Cheat"}),Object(b.jsx)("label",{htmlFor:"guess",children:"Guess Bird:"}),Object(b.jsx)("div",{className:"break"}),Object(b.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(b.jsx)("input",{type:"text",className:"textInput",id:"userGuess",value:this.state.userGuess,onChange:this.handleChange}),Object(b.jsx)("input",{type:"submit",className:"submitInput",value:"Submit"})]}),e]})})}}]),n}(s.a.Component)),p=(n(27),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).getBirdsByCountry=function(e){fetch("/api/2/recordings?query=cnt:"+e+"+type:song+q_gt:C+len:5-12").then((function(e){return e.json()})).then((function(t){i.getSingleCall(e,t.numPages)}),(function(e){i.setState({isLoaded:!0,error:e})}))},i.getSingleCall=function(e,t){var n=Math.floor(Math.random()*t)+1;console.log("numPages: "+t);var s="/api/2/recordings?query=cnt:"+e+"+type:song+q_gt:C+len:5-12&page="+n;console.log("picked page: "+n),fetch(s).then((function(e){return e.json()})).then((function(e){for(var t=!1,n=null;!1===t;){var s=Math.floor(Math.random()*e.recordings.length)+1;"mystery"!==(n=e.recordings[s]).gen.toLowerCase()&&(t=!0),console.log("total birds: "+e.recordings.length),console.log("picked bird: "+s)}i.setState({isLoaded:!0,bird:n})}),(function(e){i.setState({isLoaded:!0,error:e})}))},i.state={error:null,isLoaded:!1,bird:null},i.loadNextBird=i.loadNextBird.bind(Object(u.a)(i)),i}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.getBirdsByCountry("United_States")}},{key:"loadNextBird",value:function(){this.setState({isLoaded:!1}),this.componentDidMount()}},{key:"render",value:function(){var e=this,t=this.state,n=t.error,i=t.isLoaded;return n?Object(b.jsxs)("div",{children:["Error: ",n.message]}):i?(console.log(this.state.bird),console.log(this.state.bird.en),Object(b.jsxs)("div",{className:"identifier",children:[Object(b.jsx)("br",{}),Object(b.jsx)(j,{bird:this.state.bird}),Object(b.jsx)("br",{}),Object(b.jsx)(g,{bird:this.state.bird,loadNextBird:function(){e.loadNextBird()}})]})):Object(b.jsx)("div",{className:"identifier loading",children:"Loading..."})}}]),n}(s.a.Component)),f=n(16),m=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"render",value:function(){return Object(b.jsx)(f.a,{children:Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(p,{})})})}}]),n}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(Object(b.jsx)(m,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.96262115.chunk.js.map